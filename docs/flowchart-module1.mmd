flowchart TD
    %% ========================================
    %% MODULE 1 - R√âCUP√âRATION DE MANUSCRITS
    %% ========================================

    START([üìú MODULE 1<br/>R√©cup√©ration de manuscrits])

    %% ========================================
    %% D√âCISION PRINCIPALE
    %% ========================================
    DECISION{Quelle source ?}

    START --> DECISION

    %% ========================================
    %% BRANCHE ACHAT
    %% ========================================
    subgraph ACHAT_FLOW [üí∞ Processus d'Achat]
        ACHAT_DECISION{D√©j√†<br/>num√©ris√© ?}
        ACHAT_OUI[‚úÖ Manuscrits d√©j√†<br/>num√©ris√©s]
        ACHAT_NON[‚ùå Manuscrits pas<br/>num√©ris√©s]
        ACHAT_NUMERISATION[üñ®Ô∏è Num√©risation<br/>par biblioth√®que/organisme]
        ACHAT_RESULT[üì¶ Manuscrits<br/>num√©ris√©s re√ßus]

        ACHAT_DECISION -->|Oui| ACHAT_OUI
        ACHAT_DECISION -->|Non| ACHAT_NON
        ACHAT_NON --> ACHAT_NUMERISATION
        ACHAT_NUMERISATION --> ACHAT_RESULT
        ACHAT_OUI --> ACHAT_RESULT
    end

    %% ========================================
    %% BRANCHE SCRAPING WEB
    %% ========================================
    subgraph SCRAPING_FLOW [üåê Scraping Web]
        SCRAPING_DECISION{M√©thode<br/>disponible ?}
        SCRAPING_IIIF[üñºÔ∏è IIIF]
        SCRAPING_PDF[üìÑ PDF direct<br/>sur site web]
        SCRAPING_COMPLEXE[‚öôÔ∏è M√©thodes<br/>complexes]

        SCRAPING_DECISION -->|IIIF manifest| SCRAPING_IIIF
        SCRAPING_DECISION -->|PDF disponible| SCRAPING_PDF
        SCRAPING_DECISION -->|Autre| SCRAPING_COMPLEXE
    end

    %% ========================================
    %% POINT DE CONVERGENCE
    %% ========================================
    CONVERGENCE[‚ú® Num√©risation de tr√®s bonne qualit√©<br/>Format: TIF, R√©solution: 300-600 DPI]

    OUTPUT([üì§ SORTIE MODULE 1<br/>Vers Stockage Cloud])

    %% ========================================
    %% CONNEXIONS PRINCIPALES
    %% ========================================
    DECISION -->|Achat| ACHAT_DECISION
    DECISION -->|Scraping| SCRAPING_DECISION

    ACHAT_RESULT --> CONVERGENCE
    SCRAPING_IIIF -.->|Voir MODULE 2| CONVERGENCE
    SCRAPING_PDF -.->|Voir MODULE 2| CONVERGENCE
    SCRAPING_COMPLEXE -.->|Voir MODULE 2| CONVERGENCE

    CONVERGENCE --> OUTPUT

    %% ========================================
    %% ANNOTATIONS
    %% ========================================
    note1[üí° Co√ªt Achat:<br/>Variable selon source<br/>50-500‚Ç¨ par manuscrit]
    note2[üí° Scraping:<br/>Gratuit mais complexe<br/>L√©galit√© √† v√©rifier]
    note3[üí° Qualit√© requise:<br/>Minimum 300 DPI<br/>Format TIF recommand√©]

    ACHAT_RESULT -.-> note1
    SCRAPING_COMPLEXE -.-> note2
    CONVERGENCE -.-> note3

    %% ========================================
    %% LIENS VERS AUTRES MODULES
    %% ========================================
    link1[üîó MODULE 2:<br/>D√©tails t√©l√©chargement]

    SCRAPING_COMPLEXE -.->|Pour plus de d√©tails| link1

    %% ========================================
    %% STYLES
    %% ========================================
    classDef startEnd fill:#4caf50,stroke:#2e7d32,stroke-width:3px,color:#fff
    classDef decision fill:#ffeb3b,stroke:#f57f17,stroke-width:2px
    classDef achat fill:#e1f5ff,stroke:#0288d1,stroke-width:2px
    classDef scraping fill:#f3e5f5,stroke:#8e24aa,stroke-width:2px
    classDef convergence fill:#fff9c4,stroke:#f57f17,stroke-width:3px
    classDef note fill:#ffccbc,stroke:#d84315,stroke-width:1px,stroke-dasharray: 5 5
    classDef link fill:#e0e0e0,stroke:#757575,stroke-width:1px,stroke-dasharray: 3 3

    class START,OUTPUT startEnd
    class DECISION,ACHAT_DECISION,SCRAPING_DECISION decision
    class ACHAT_OUI,ACHAT_NON,ACHAT_NUMERISATION,ACHAT_RESULT achat
    class SCRAPING_IIIF,SCRAPING_PDF,SCRAPING_COMPLEXE scraping
    class CONVERGENCE convergence
    class note1,note2,note3 note
    class link1 link

    style ACHAT_FLOW fill:#e3f2fd,stroke:#1565c0,stroke-width:2px
    style SCRAPING_FLOW fill:#f3e5f5,stroke:#6a1b9a,stroke-width:2px
